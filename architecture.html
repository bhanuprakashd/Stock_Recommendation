<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSE Stock Analysis Agent - Architecture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #fff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .architecture {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .layer {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .layer-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .layer-title .icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .modules {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .module {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            min-width: 200px;
            max-width: 280px;
            flex: 1;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .module:hover {
            transform: translateY(-5px);
            border-color: rgba(0, 217, 255, 0.5);
            box-shadow: 0 10px 30px rgba(0, 217, 255, 0.2);
        }

        .module-name {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 8px;
            color: #00d9ff;
            font-family: 'Consolas', monospace;
        }

        .module-desc {
            font-size: 0.85rem;
            color: #aaa;
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .module-features {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .feature {
            background: rgba(0, 217, 255, 0.15);
            color: #00d9ff;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
        }

        .feature.green {
            background: rgba(0, 255, 136, 0.15);
            color: #00ff88;
        }

        .feature.orange {
            background: rgba(255, 165, 0, 0.15);
            color: #ffa500;
        }

        .feature.purple {
            background: rgba(147, 112, 219, 0.15);
            color: #9370db;
        }

        .feature.red {
            background: rgba(255, 99, 71, 0.15);
            color: #ff6347;
        }

        /* Layer colors */
        .data-layer .layer-title .icon { background: #2563eb; }
        .analysis-layer .layer-title .icon { background: #7c3aed; }
        .recommendation-layer .layer-title .icon { background: #059669; }
        .news-layer .layer-title .icon { background: #dc2626; }
        .output-layer .layer-title .icon { background: #d97706; }

        /* Flow arrows */
        .flow-arrow {
            display: flex;
            justify-content: center;
            padding: 10px 0;
        }

        .arrow {
            width: 40px;
            height: 40px;
            position: relative;
        }

        .arrow::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
            width: 3px;
            height: 25px;
            background: linear-gradient(to bottom, #00d9ff, #00ff88);
        }

        .arrow::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 5px;
            transform: translateX(-50%);
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 12px solid #00ff88;
        }

        /* Legend */
        .legend {
            margin-top: 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
        }

        .legend-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #fff;
        }

        .legend-items {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: #aaa;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        /* Data flow diagram */
        .data-flow {
            margin-top: 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
        }

        .flow-title {
            font-size: 1.3rem;
            margin-bottom: 25px;
            text-align: center;
        }

        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .flow-box {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid rgba(0, 217, 255, 0.3);
            border-radius: 8px;
            padding: 12px 20px;
            font-size: 0.9rem;
            text-align: center;
        }

        .flow-box.highlight {
            background: rgba(0, 255, 136, 0.1);
            border-color: rgba(0, 255, 136, 0.3);
        }

        .flow-connector {
            color: #666;
            font-size: 1.5rem;
        }

        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .stat {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #888;
            margin-top: 5px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 1.8rem; }
            .module { min-width: 100%; }
            .flow-diagram { flex-direction: column; }
            .flow-connector { transform: rotate(90deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>NSE Stock Analysis Agent</h1>
        <p class="subtitle">Swing Trading Recommendation System Architecture</p>

        <div class="architecture">
            <!-- Data Layer -->
            <div class="layer data-layer">
                <div class="layer-title">
                    <span class="icon">ðŸ“Š</span>
                    Data Layer
                </div>
                <div class="modules">
                    <div class="module">
                        <div class="module-name">nse_tickers.py</div>
                        <div class="module-desc">Fetches NSE stock symbols from indices</div>
                        <div class="module-features">
                            <span class="feature">NIFTY 50</span>
                            <span class="feature">NIFTY 500</span>
                            <span class="feature">Sector Indices</span>
                        </div>
                    </div>
                    <div class="module">
                        <div class="module-name">fetch_stock_data.py</div>
                        <div class="module-desc">Fetches historical OHLCV data via yfinance</div>
                        <div class="module-features">
                            <span class="feature green">365 days default</span>
                            <span class="feature">Parallel fetch</span>
                            <span class="feature">Caching</span>
                        </div>
                    </div>
                    <div class="module">
                        <div class="module-name">sectorial_tickers.py</div>
                        <div class="module-desc">Sector-based stock filtering and mapping</div>
                        <div class="module-features">
                            <span class="feature">12 Sectors</span>
                            <span class="feature">Aliases</span>
                            <span class="feature">NIFTY 500 lookup</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow"><div class="arrow"></div></div>

            <!-- Analysis Layer -->
            <div class="layer analysis-layer">
                <div class="layer-title">
                    <span class="icon">ðŸ”¬</span>
                    Analysis Layer
                </div>
                <div class="modules">
                    <div class="module">
                        <div class="module-name">fundamental_analyzer.py</div>
                        <div class="module-desc">Fundamental analysis with Piotroski F-Score</div>
                        <div class="module-features">
                            <span class="feature purple">Piotroski 0-9</span>
                            <span class="feature">P/E, P/B, PEG</span>
                            <span class="feature">ROE, ROA</span>
                            <span class="feature">D/E Ratio</span>
                        </div>
                    </div>
                    <div class="module">
                        <div class="module-name">technical_analyzer.py</div>
                        <div class="module-desc">Technical analysis with SuperTrend & patterns</div>
                        <div class="module-features">
                            <span class="feature orange">SuperTrend</span>
                            <span class="feature orange">Candlesticks</span>
                            <span class="feature">RSI, MACD</span>
                            <span class="feature">Bollinger</span>
                        </div>
                    </div>
                    <div class="module">
                        <div class="module-name">state_of_art_analyzer.py</div>
                        <div class="module-desc">Comprehensive multi-factor analysis</div>
                        <div class="module-features">
                            <span class="feature green">15+ Indicators</span>
                            <span class="feature purple">Piotroski</span>
                            <span class="feature">Research weights</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow"><div class="arrow"></div></div>

            <!-- News Layer -->
            <div class="layer news-layer">
                <div class="layer-title">
                    <span class="icon">ðŸ“°</span>
                    News Layer (Optional)
                </div>
                <div class="modules">
                    <div class="module">
                        <div class="module-name">news_fetcher.py</div>
                        <div class="module-desc">Fetches news from multiple sources</div>
                        <div class="module-features">
                            <span class="feature red">NewsAPI</span>
                            <span class="feature red">Google News</span>
                            <span class="feature">Caching</span>
                        </div>
                    </div>
                    <div class="module">
                        <div class="module-name">news_sentiment.py</div>
                        <div class="module-desc">FinBERT sentiment analysis</div>
                        <div class="module-features">
                            <span class="feature red">FinBERT</span>
                            <span class="feature">85% accuracy</span>
                            <span class="feature">Recency decay</span>
                        </div>
                    </div>
                    <div class="module">
                        <div class="module-name">news_trigger.py</div>
                        <div class="module-desc">4-mode trigger engine</div>
                        <div class="module-features">
                            <span class="feature red">Entry Signal</span>
                            <span class="feature red">Confirmation</span>
                            <span class="feature red">Risk Filter</span>
                            <span class="feature red">Dynamic</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow"><div class="arrow"></div></div>

            <!-- Recommendation Layer -->
            <div class="layer recommendation-layer">
                <div class="layer-title">
                    <span class="icon">ðŸŽ¯</span>
                    Recommendation Layer
                </div>
                <div class="modules">
                    <div class="module">
                        <div class="module-name">swing_recommender.py</div>
                        <div class="module-desc">Main recommendation engine</div>
                        <div class="module-features">
                            <span class="feature green">60% Technical</span>
                            <span class="feature green">40% Fundamental</span>
                            <span class="feature">News triggers</span>
                        </div>
                    </div>
                    <div class="module">
                        <div class="module-name">swing_report.py</div>
                        <div class="module-desc">Detailed trade reports with reasoning</div>
                        <div class="module-features">
                            <span class="feature green">Why selected</span>
                            <span class="feature green">Confidence</span>
                            <span class="feature green">Time estimate</span>
                        </div>
                    </div>
                    <div class="module">
                        <div class="module-name">index_analysis.py</div>
                        <div class="module-desc">Index-based stock analysis</div>
                        <div class="module-features">
                            <span class="feature">20+ Indices</span>
                            <span class="feature">Compare mode</span>
                            <span class="feature">Quick scan</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flow-arrow"><div class="arrow"></div></div>

            <!-- Output Layer -->
            <div class="layer output-layer">
                <div class="layer-title">
                    <span class="icon">ðŸ“ˆ</span>
                    Output
                </div>
                <div class="modules">
                    <div class="module">
                        <div class="module-name">Recommendation</div>
                        <div class="module-desc">Final swing trade recommendation</div>
                        <div class="module-features">
                            <span class="feature orange">Entry Price</span>
                            <span class="feature orange">Target</span>
                            <span class="feature orange">Stop Loss</span>
                            <span class="feature orange">Risk:Reward</span>
                        </div>
                    </div>
                    <div class="module">
                        <div class="module-name">Signals</div>
                        <div class="module-desc">Trading signals with confidence</div>
                        <div class="module-features">
                            <span class="feature green">STRONG BUY</span>
                            <span class="feature green">BUY</span>
                            <span class="feature">HOLD</span>
                            <span class="feature red">WAIT</span>
                        </div>
                    </div>
                    <div class="module">
                        <div class="module-name">Analysis</div>
                        <div class="module-desc">Detailed reasoning and risk factors</div>
                        <div class="module-features">
                            <span class="feature">Composite Score</span>
                            <span class="feature">Confidence %</span>
                            <span class="feature">Time Horizon</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Flow Diagram -->
        <div class="data-flow">
            <div class="flow-title">Data Flow Pipeline</div>
            <div class="flow-diagram">
                <div class="flow-box">NSE Symbols</div>
                <span class="flow-connector">â†’</span>
                <div class="flow-box">Historical Data<br><small>(365 days)</small></div>
                <span class="flow-connector">â†’</span>
                <div class="flow-box">Technical Analysis<br><small>(60% weight)</small></div>
                <span class="flow-connector">â†’</span>
                <div class="flow-box">Fundamental Analysis<br><small>(40% weight)</small></div>
                <span class="flow-connector">â†’</span>
                <div class="flow-box">News Triggers<br><small>(optional)</small></div>
                <span class="flow-connector">â†’</span>
                <div class="flow-box highlight">Top Recommendations</div>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats">
            <div class="stat">
                <div class="stat-value">15</div>
                <div class="stat-label">Python Modules</div>
            </div>
            <div class="stat">
                <div class="stat-value">20+</div>
                <div class="stat-label">Technical Indicators</div>
            </div>
            <div class="stat">
                <div class="stat-value">9</div>
                <div class="stat-label">Piotroski Factors</div>
            </div>
            <div class="stat">
                <div class="stat-value">4</div>
                <div class="stat-label">News Trigger Modes</div>
            </div>
            <div class="stat">
                <div class="stat-value">400+</div>
                <div class="stat-label">Backtested Trades</div>
            </div>
            <div class="stat">
                <div class="stat-value">14.3%</div>
                <div class="stat-label">Best Backtest Return</div>
            </div>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-title">Scoring Formula</div>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-color" style="background: #7c3aed;"></div>
                    <span>Composite = (Technical Ã— 0.6) + (Fundamental Ã— 0.4)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #059669;"></div>
                    <span>Confidence adjusted by News Sentiment (Â±20 pts)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #dc2626;"></div>
                    <span>News triggers can upgrade/downgrade signals</span>
                </div>
            </div>
        </div>

        <!-- File Structure -->
        <div class="legend" style="margin-top: 20px;">
            <div class="legend-title">File Structure</div>
            <pre style="color: #aaa; font-size: 0.85rem; line-height: 1.6; overflow-x: auto;">
Stock_Agent/
â”œâ”€â”€ <span style="color: #00d9ff;">Data Layer</span>
â”‚   â”œâ”€â”€ nse_tickers.py           # NSE symbol fetching
â”‚   â”œâ”€â”€ fetch_stock_data.py      # Historical OHLCV data
â”‚   â””â”€â”€ sectorial_tickers.py     # Sector filtering
â”‚
â”œâ”€â”€ <span style="color: #9370db;">Analysis Layer</span>
â”‚   â”œâ”€â”€ fundamental_analyzer.py  # Fundamental + Piotroski F-Score
â”‚   â”œâ”€â”€ technical_analyzer.py    # Technical + SuperTrend + Candlesticks
â”‚   â””â”€â”€ state_of_art_analyzer.py # Comprehensive multi-factor
â”‚
â”œâ”€â”€ <span style="color: #ff6347;">News Layer</span>
â”‚   â”œâ”€â”€ news_fetcher.py          # News API integration
â”‚   â”œâ”€â”€ news_sentiment.py        # FinBERT sentiment
â”‚   â”œâ”€â”€ news_trigger.py          # 4-mode triggers
â”‚   â””â”€â”€ config/news_settings.py  # Configuration
â”‚
â”œâ”€â”€ <span style="color: #00ff88;">Recommendation Layer</span>
â”‚   â”œâ”€â”€ swing_recommender.py     # Main engine
â”‚   â”œâ”€â”€ swing_report.py          # Detailed reports
â”‚   â””â”€â”€ index_analysis.py        # Index-based analysis
â”‚
â”œâ”€â”€ <span style="color: #ffa500;">Validation Layer</span>
â”‚   â”œâ”€â”€ backtesting.py           # Strategy backtester
â”‚   â””â”€â”€ backtest_report.py       # HTML report generator
â”‚
â””â”€â”€ requirements.txt             # Dependencies
            </pre>
        </div>
    </div>
</body>
</html>
